{"version":3,"sources":["../../src/pages/add-bank/add-bank.module.ts","../../src/pages/add-bank/add-bank.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddBankPage } from './add-bank';\n\n@NgModule({\n  declarations: [\n    AddBankPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddBankPage),\n  ],\n})\nexport class AddBankPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-bank/add-bank.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController,ToastController,AlertController } from 'ionic-angular';\nimport { PaymentProvider } from '../../providers/payment/payment' \nimport { Storage } from '@ionic/storage';\n@IonicPage()\n@Component({\n  selector: 'page-add-bank',\n  templateUrl: 'add-bank.html',\n})\nexport class AddBankPage {\n\n  userId:any;\n  searchStatus:boolean;\n  accountHolderName:any;\n  accountBsb:any; \n  accountNumber:any;\n  account_type=\"individual\";\n  alphabetRegex=/^[A-Za-z ]*$/;\n  bankData:any;\n  bankSavedData:any;\n  bankAttachedStatus:boolean;\n  status:boolean=false;\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public paymentProvider:PaymentProvider,\n    public storage:Storage,\n    public loadingCtrl:LoadingController,\n    public alertCtrl:AlertController,\n    public toastCtrl:ToastController) {\n    this.searchStatus=false;\n    this.bankData=[];\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad AddBankPage');\n  }\n\n  ionViewDidEnter() {\n    console.log('ionViewDidLoad CreditPagePage');\n    this.bankAttachedStatus=false;\n    this.storage.get('userId').then(\n    (userId)=>{\n        this.userId=userId;\n        this.getBankDetails(userId);\n    });\n}\n\n\n getBankDetails(userId){\n\n  let loading = this.loadingCtrl.create({\n    content: 'Please wait...'\n  });\n  loading.present();\n  \n  this.paymentProvider.getBankAccount(userId).subscribe( \n    data=>{\n        console.log(data);\n        loading.dismiss();\n\n        if(data.json().msg==\"success\"){ \n          this.bankAttachedStatus=true;\n          this.status=true;\n          this.bankSavedData=data.json().data[0];\n          console.log(this.bankSavedData);\n        }\n\n        if(data.json().msg==\"error\"){\n          this.status=false;\n          this.bankAttachedStatus=false;\n        }\n    },\n    err=>{\n        loading.dismiss();\n        this.presentToast(\"Please try again later\",1);\n    }\n  );\n\n }\n\n deleteBankAccount(bankId){\n\n    this.presentConfirm('Confirm',\"You cannot delete a linked bank account,please add another account to deleting this one\");\n  \n  // let loading = this.loadingCtrl.create({\n  //   content: 'Please wait...'\n  // });\n  // loading.present();\n  \n  // this.paymentProvider.deleteBankAccount(this.userId,bankId).subscribe( \n  //   data=>{\n  //       console.log(data);\n  //       loading.dismiss();\n  //       if(data.json().msg==\"success\"){ \n  //         this.bankAttachedStatus=false;\n  //       }\n\n  //       if(data.json().msg==\"error\"){\n  //         this.bankAttachedStatus=true;\n  //       }\n  //   },\n  //   err=>{\n  //       loading.dismiss();\n  //       this.presentToast(\"Please try again later\",1);\n  //   }\n  // );\n\n }\n\n  /**\n   * Method trigger if user start typing on form and validation will be check here\n   */\n  change(){\n  \n    if(!this.accountHolderName.match(this.alphabetRegex) || this.accountHolderName==\"\" || \n      !this.checkAccountBsb(this.accountBsb) || this.accountBsb==\"\" || \n      !this.checkAccountNumber(this.accountNumber) || this.accountNumber==\"\"\n    ){\n      this.searchStatus=false;//disable the buttion\n    }else{\n      this.searchStatus=true;\n    }\n  }\n\n  /**\n   * BSB (6 Characters)\n   */\n  checkAccountBsb(number):boolean{\n    let regex = new RegExp(\"^[0-9]{6}$\"); \n    if(number){\n      if(regex.test(number)){\n        console.log(\"bsb number true\");\n        return true;\n      }else{\n        console.log(\"bsb number false\");\n        return false;\n      }\n    }\n  } \n\n  /**\n   * Account Number (6-10 characters)\n   */\n  checkAccountNumber(number):boolean{\n    let regex = new RegExp(\"^[0-9]{6,10}$\");\n    if(number){\n      if(regex.test(number)){\n        console.log(\"account number true\");\n        return true;\n      }else{\n        console.log(\"account number false\");\n        return false;\n      }\n      \n    } \n    \n  }\n\n  removeAccountHolderName(){\n    this.accountHolderName=\"\";\n  }\n\n  removeBsb(){\n    this.accountBsb=\"\";\n  }\n\n  removeAccountNumber(){\n    this.accountNumber=\"\";\n  }\n\n\n  /**\n   * Method used to add bank account \n   */\n  addBank(){\n\n    this.bankData.accHolderName=this.accountHolderName;\n    this.bankData.accBsbNumber=this.accountBsb;\n    this.bankData.accNumber=this.accountNumber;\n    this.bankData.accType=this.account_type;\n\n    let loading = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });\n\n    loading.present();\n    this.paymentProvider.addBankAccount(this.bankData,this.userId).subscribe( \n      data=>{\n          console.log(data);\n          loading.dismiss();\n          if(data.json().msg==\"success\"){ \n              this.presentToast(\"Bank has been added successfully\",0);\n          }\n\n          if(data.json().msg==\"error\"){\n            this.presentAlert(data.json().msg_details);\n          }\n      },\n      err=>{\n          console.log(err);\n          this.presentToast(\"Invalid card details\",1);\n          loading.dismiss();\n      }\n  );\n  }\n \n  presentAlert(msg) {\n    let alert = this.alertCtrl.create({\n      title: 'Message',\n      subTitle: msg,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n  presentToast(msg,id) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'top'\n    });\n    toast.onDidDismiss(() => {\n        if(id==0){\n            this.navCtrl.pop();\n        }else{\n\n        }\n    });\n    toast.present();\n  }\n\n  presentConfirm(title,msg) {\n    //You cannot delete a linked bank account,please add another account to deleting this one\n    let alert = this.alertCtrl.create({\n      title: title,\n      message: msg,\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Add New',\n          handler: () => {\n            this.bankAttachedStatus=false;\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-bank/add-bank.ts"],"sourceRoot":""}